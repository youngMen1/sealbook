# Java生鲜电商平台-订单表的设计

场景分析说明：

买家（餐馆）用户，通过APP进行选菜，放入购物车，然后下单，最终支付的流程，我们称为下单过程。

买家可以在张三家买茄子，李四家买萝卜，王五家买白菜，赵六家买猪肉等

那么买家就应该有个订单主表，我们称为订单表，同时还有 上面所说的具体的订单明细表，清楚的查看自己买了什么菜，多少元一斤，买了多少斤等。

## 1.订单表的设计：
![](/static/image/641237-20180512175618604-1439714475.png)

补充说明：交易状态：存在下了单子没付款，付款了没结算等状态。


```
付款状态：存在未付款，已经付款。线下付款。（线下付款是这样的场景，有些客户对平台不熟悉，刚加入抱着试试的态度，所以他们选择线下付款）

BestTime:收货人的最佳收货时间，这个有些客户说早上10点送过来，有些是说早上8点送过来。不同的客户，送货的时间是不一样的。

订单金额：存在这个下单的总金额

付款金额：就是最终这个订单，用户支付的费用。（存在这个场景，买家买了菜以后他不要菜了，需要退钱，然后退钱就退到买家余额里面，下次下单的时候就减少掉）

最终金额：就是最终计算完成后的金额。

这里面的绕点就是业务方面，一般的情况生鲜生意方面都会存在多退少补的一种情况，所以出现了用户余额方面的事情。

```

## 2.订单明细表的设计：
![](/static/image/641237-20180512180216554-1404291063.png)

补充说明：  

```
1.在主订单下面可以查看清楚自己的订单明细，也就是今天究竟买了那些菜，分别多少元一斤，我买了多少斤，最终多少钱等等具体情况

2. 还包括配送费用，以及对应的卖家是否备货完成，我们去取货等等，

3. 对于没有备货的商家，我们是可以用短信或者人为干预的

4. 对某个具体的配送师傅而言，我们也可以进行精细化的一个管理。


```

最终还是有一个问题，就是客户在下单两个小时内，我们是允许取消某一个订单的，这个也属于人之常情，比如菜搞错了，他可以取消某一个订单项，

但是不存在 取消整个订单的情况，如果有，需要我们的客服从后台管理系统里面进行人工干预。

## 相关实际运营图片如下：
![](/static/image/641237-20190710151407315-1534369431.png)
![](/static/image/641237-20190710151417720-272970450.png)
![](/static/image/641237-20190710151430030-1867107466.png)
    