# Java生鲜电商平台-一次代码重构的实战案例
说明，Java开源生鲜电商平台-一次代码重构的实战案例，根据实际的例子，分析出重构与抽象，使代码更加的健壮与高效。

1.业务说明

系统原先已有登录功能，我们打算增加一个登录IP和允许登录时间的安全限制业务。

IP 分为内网ip、外网ip，如果设置了，则该用户只允许在这些ip登录

 

2.原有代码贴图

登录代码原先已有，这是增加的功能，该同事增加的代码如下：

图1：login方法中，判断是否可以登录的私有方法调用  


# 2.总结
* 避免重复代码 看到重复代码，务必想办法把它抽离出来重用。

* 善用工具类 无论自己框架的还是第三方开源框架的，不要自己发明轮子，如果没有，甚至自己写一个工具方法，这样可以让代码更关注业务。

* 涉及多重循环时，好好考虑一下是不是一定要这样做才可以。能否每个业务一个独立的子方法？

* 注释不能省，而且对于关键代码，有注释可读性大大提升。

* 魔术字要重构为常量。

* 写日志时，切记不要写那种没有参考价值的日志。你要考虑一下，如果以后业务出错或者出现意外需要回看日志时，这些信息够不够，能不能让你足够的重现当时的场景