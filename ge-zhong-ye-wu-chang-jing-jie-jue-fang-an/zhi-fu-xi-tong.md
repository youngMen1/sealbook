# 1.什么是支付系统

自古以来，所有的商业活动都会产生货币的**收款**与**付款**行为。在人类漫长的历史长河中，记录收付款行为的方式不断迭代：古代的账房先生通过手工记账，工业社会通过收银机机械记账……

今天，进入了互联网时代的我们，商业行为也一同进行了数字化与信息化的演变，成为今天的「电子商务」。

支付系统伴随着电子商务的出现而出现，为各类电子商务经营活动实现在线收付款交易以及管理交易资金等功能，**是具有一定独立性的内部系统模块。**

![](/static/image/20190409112525462.png)

（1）、平台：开展电子商务经济活动的主体。

（2）、业务系统：实现平台**用户注册、商品定价、营销活动**等相关功能。

**平台与业务系统的关系：业务系统将用户购买行为通过各种交易订单的形式进行记录，并交付支付系统进行处理，最终由支付系统完成收款与付款。**

根据央行的现行规定，人民币交易处理仅限于**银行及第三方持牌支付机构**，**因此支付系统在实现上述功能时，需要通过外部银行、第三方持牌支付机构完成交易资金处理。因此，支付系统需要具备：**

（1）、**统一封装处理的交易接口**，以**对接外部交易渠道，为业务系统实现交易订单处理的功能。**  
（2）、**根据业务系统设置的资金分配规则**，在一笔交易有多个收款方参与的情况下**根据资金分配规则完成交易资金的自动化清分与结算，而后通过已对接的外部交易渠道完成划付。**  
（3）、**账务数据记录功能**，上述的**交易**、**清分**、**结算**形成的资金变动信息，需要支付系统通过账务数据记录功能加以记录，对交易资金进行统计并完成**交易资金核对**等财会工作。

# 2.支付系统架构

支付系统的**主要职责是处理业务系统发起的所有交易请求，包含收银台、交易系统、支付核心等模块**，根据各模块不同的功能职责，可以将支付系统分为业务层和支付层两部分。

![](/static/image/20190409113422631.png)

（1）、业务层：负责**业务系统提供收付款的操作界面**以及**处理业务系统提交的交易请求**；  
（2）、支付层：负责**通过支付渠道实时处理完成资金的收付款、记录参与交易的账户间资金流转情况**并**按照预定规则对账户所属资金进行拆分与合并。**

## 2.1.业务层

业务层包含**收银台、交易系统**以及**会员系统**三个功能模块：

### **2.1.1.收银台**

收银台即用户日常付款前选择渠道的页面，是支付平台提供的基本功能之一，主要职责是**协助业务平台完成支付交易，向用户提供一致的交易体验**。一般情况下，根据**不同终端类型定制标准化的收银台**给到外部进行调用，保证各终端体验一致**且针对各端特定需求、场景来展现不同的支付方式。**  
       收银台的业务场景（边界）一般分为**付款与充值**两部分：

（1）、付款即通过各类支付方式针对业务订单发起付款，例如：用户在天猫店购买一件衣服，确认订单后自动跳转至支付宝，引导用户选择对应的方式（余额、花呗、银行卡等）进行付款。

（2）、充值即用户对账户进行余额充值，例如：用户登录支付宝、微信或其他商户自有钱包系统对账户余额进行充值。

**支付渠道的服务模型**，分为以下几个要点：

（1）、**服务模型的概念**：从支付公司角度来看，**服务模型是决定商户**可以使用的**交易形式**（担保收单、即时到账等）、**支付产品**（快捷、网银、代扣、POS 等）、**签约方式、阶段周期**（T+0、T+1、T+N 等）以及**费率**等核心问题的综合体；  
       从电商平台角度来看，电商公司内部使用的支付系统与支付机构相比复杂度较低，可通过参考支付公司服务模型，梳理不同业务、不同交易类型、不同结算周期以及不同支付渠道等复杂需求，搭建合理且满足业务需求的服务模型，例如充值类交易，具有商城属性的业务可配置担保收单或即时到账等交易类型。

（2）、**服务模型的维度**：

![](/static/image/20190409114410171.png)

**行业/服务维度：**即从业务角度出发对支付产品进行划分。

例如：蚂蚁金融面向行业输出交易、结算、会员、安全等服务，且为不同的服务等级划定标准，贯穿所有内部系统；普通非支付公司（以电商为例），提供即时到账、担保收单等，基本上能满足大多数的业务场景。

![](/static/image/20190409114541548.png)

**商品维度：**

针对不同行业的交易标的，由于交易价格、成本与利润差异大，因此在业务层面不同的支付渠道要有不同的可用性标准。

一般情况下，商品本身与市场或行业挂钩，例如喜马拉雅在接入微信/支付宝时，业务所在行业为视频影音属于虚拟商品，因此接入费率为 1%，结算周期为 T+7。

由此可得，支付公司针对不同商品本身的特性（例如风险等因素）在费率和结算周期上会进行一定的控制；同时，针对高风险行业会在支付方式、渠道层进行限制。

![](/static/image/20190409114703277.png)

**市场维度：**

此处「市场」指的是指引客户使用支付产品服务的场所，它可能是支付产品本身，亦可能为相关公司或平台的网站。例如某集团子公司、某公司投资的公司以及与该公司无关的外部公司等等，可分为集团、内部以及外部等维度。

20190409114743945.png

**客户维度：**

此处「客户」指的是服务的具体使用者。可分为个人客户及企业客户，通过支付系统内的会员系统进行区分。

20190409114834455.png

**付款方维度：**

付款方在整个业务过程中未核心角色，针对付款方用户的特征应建立以支付渠道收款方维度的模型，例如付款方的账户模型、安装是否正式、证书等级等要素都决定着付款方的付款流程。

20190409114915873.png

**支付渠道维度：**

在电商平台，跳转到支付系统是，收银台根据付款方的参数规则，进而对该笔支付在收银台内可使用的支付渠道进行选择。例如充值账户余额不允许使用信用卡时，收银台在付款方付款时仅可展现借记卡等支付方式，喜马拉雅在于支付宝等第三方支付公司交互式，下单接口里一般含有做借贷分离的参数，该参数起到的作用就是可以指定付款方即用户不可使用借记卡或信用卡。

20190409114953872.png

**业务渠道维度：**

业务端使用的入口，代表着客户或者业务方和支付系统的交互方式。例如通过 PC 端跳转到收银台、通过 App 跳转到收银台以及纯接口形式跳转等等。

2019040911502923.png

**支付渠道各类配置：**

（1）、

**渠道配置：**

抽象收银台支付方式大类（第三方、网银储蓄卡、网银信用卡、信用类（花呗、白条）等），对应每个大类下配置对应的落地渠道，再分别对适用场景进行匹配（ App、H5、PC 端、公众号等等），不同的场景下应对应不同的支付方式。

  


（2）、

**渠道参数配置：**

在业务进行中根据公司的具体情况，部分业务可能独立运营，因此在独立运营过程中财务需要就独立业务传入各支付渠道对应的密钥及商户 ID 等关键参数信息，以满足业务方需要支付系统根据不同商户信息调用对应渠道收款主体的需求。

# 2.参考

支付系统-概念与架构：

[https://blog.csdn.net/liuhuiteng/article/details/89139699](https://blog.csdn.net/liuhuiteng/article/details/89139699)

