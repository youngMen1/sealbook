# 01 \| 设计秒杀系统时应该注意的5个架构原则

TODO

# 2.总结

#### 秒杀系统本质上就是一个满足大并发、高性能和高可用的分布式系统。

#### 架构原则：“4 要 1 不要”

数据要尽量少、请求数要尽量少、路径要尽量短、依赖要尽量少，以及不要有单点。

* 1.数据要尽量少，从而减少cpu消耗
* 2.请求数尽量少，从而减少加载时间
* 3.访问路径尽量短，减少节点消耗
* 4.强依赖尽量少，减少加载时间
* 5.不要有单点，要有备份

#### 不同的请求量，应有不同的系统架构。 适用原则，简单原则，演进原则。

# 3.好问题

1.本地cache用什么实现好呢？  
2.通过什么方式往本地cache 写数据呢？  
3.秒杀系统的及时性非常高，把库存写进cache ，怎么及时更新呢？

```
作者回复: 1.本地cache一般就是用内存实现，用java集合类型就行
2.用订阅的方式，在初始化时加载到内存
3.有两种方法，一是定时更新取3秒，二是，主动更新，数据库字段更新后发消息更新缓存，
这个需要用到一个组件阿里叫metaq就是就是数据库字段更新会产生一条消息。另外cache里库存不需要100%和数据库一致，
这个在后面的文章也有介绍
```

数据缓存在机器内存中的话，集群内如何实现多台机器数据一致性？

```
作者回复: 在内存的数据是静态数据，不会更新，没有一致性问题
```

单点的概念是啥意思，不太明白

```
作者回复: 单点就是没有备份，挂了系统没法正常服务了，需要集群部署。
```



