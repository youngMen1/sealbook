# 1.基本介绍

## 消息发送确认，消费确认整体流程图

![img](/static/image/RabbitMq消息确认图.jpg)

### 什么是生产端的可靠性投递？

保障消息的成功发出

保障MQ节点的成功接收

发送端收到MQ节点\(Broker\) 确认应答

完善的消息补偿机制

如果想保障消息百分百投递成功，只做到前三步不一定能够保障。有些时候或者说有些极端情况，比如生产端在投递消息时可能就失败了，或者说生产端投递了消息，MQ也收到了，MQ在返回确认应答时，由于网络闪断导致生产端没有收到应答，此时这条消息就不知道投递成功了还是失败了，所以针对这些情况我们需要做一些补偿机制。

### 互联网大厂的解决方案

1.消息落库，对消息状态进行打标

2.消息的延迟投递，做二次确认，回调检查 具体使用哪种要根据业务场景和并发量、数据量大小来决定

## rabbitmq的高级特性：

如何保障消息的百分之百成功？

要满足4个条件：生产方发送出去，消费方接受到消息，发送方接收到消费者的确认信息，完善的消费补偿机制

### 解决方案一、消息落库，进行消息状态打标 ![img](/static/image/1305004-20180908100016978-1607725171.jpg)

# 2.怎么使用

20190618174348115.png

# 3.总结

# 4.参考

Rabbitmq之高级特性——百分百投递消息：  
[https://blog.csdn.net/zuixiaoyao\_001/article/details/82599115](https://blog.csdn.net/zuixiaoyao_001/article/details/82599115)

