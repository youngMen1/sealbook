
# RabbitMQ高级特性--幂等性概念

## 幂等性是什么
简单来说就是用户对于同一操作发起的一次请求或者多次请求的结果是一致的。
我们可以借鉴数据库的乐观锁机制来举个例子

* 首先为表添加一个版本字段version
* 在执行更新操作前呢，会先去数据库查询这个version
* 然后执行更新语句，以version作为条件，例如：
```
UPDATE T_REPS SET COUNT = COUNT -1，VERSION = VERSION + 1 WHERE VERSION = 1
```
* 如果执行更新时有其他人先更新了这张表的数据，那么这个条件就不生效了，也就不会执行操作了，通过这种乐观锁的机制来保障幂等性。




## 消费端-幂等性保障

# RabbitMQ解决消息幂等性问题




