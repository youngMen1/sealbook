## 分解条件式 {#_3}

在条件式的每个分支上有着相同的一段代码。

**将这段重复代码搬移到条件式之外。**

```
if (isSpecialDeal()) {
    total = price * 0.95;
    send();
}
else {
    total = price * 0.98;
    send();
}
```

![](http://wangvsa.github.io/refactoring-cheat-sheet/images/arrow.gif)

```
if (isSpecialDeal())
    total = price * 0.95;
else
    total = price * 0.98;
send();
```

**动机（Motivation）**

有时你会发现，一组条件式的所有分支都执行了相同的某段代码。如果是这样，你就应该将这段代码搬移到条件式外面。这样，代码才能更清楚地表明哪些东西随条件的变化而变化、哪些东西保持不变。

**做法（Mechanics）**

* 鉴别出「执行方式不随条件变化而变化」的代码。
* 如果这些共通代码位于条件式起始处，就将它移到条件式之前。
* 如果这些共通代码位于条件式尾端，就将它移到条件式之后。
* 如果这些共通代码位于条件式中段，就需要观察共通代码之前或之后的代码 是否改变了什么东西。如果的确有所改变，应该首先将共通代码向前或向后 移动，移至条件式的起始处或尾端，再以前面所说的办法来处理。
* 如果共通代码不止一条语句，你应该首先使用以
  [提炼函数](http://wangvsa.github.io/refactoring-cheat-sheet/composing-methods/#_1)
  将共通 代码提炼到一个独立函数中，再以前面所说的办法来处理。

---

## 合并条件表达式

你有一系列条件测试，都得到相同结果。

**将这些测试合并为一个条件式，并将这个条件式提炼成为一个独立函数。**







## 合并重复的条件片段 {#_2}

## 移出控制标记 {#_5}

## 以卫语句取代嵌套条件式 {#_7}

## 以多态取代条件式 {#_6}

## 引入Null对象 {#null}

## 引入断言 {#_4}



